# mkcert generated certificates

This directory contains certificate authority and server certificates
generated by [mkcert].

# mkcert usage

* generate `mkcert` CA and install it:
```
mkcert -install
```
* generate server certificates
```
mkcert \
    -cert-file "wildcard.example.local.pem" \
    -key-file "wildcard.example.local.key" \
    dev.example.lan.local "*.example.lan.local" "*.dev.example.lan.local"
```

## Using mkcert generated certificates

nginx simplified example:

```nginx
  ##################################################
  # SSL/TLS
  # mkcert setup
  include                   "extra/tls-mkcert-setup.conf";
  ##################################################
```

full nginx example:
```nginx
##################################################
# SSL/TLS
include                   "extra/tls-common.conf";
ssl_certificate           "/etc/nginx/tls/mkcert/wildcard.example.local.pem";
ssl_certificate_key       "/etc/nginx/tls/mkcert/wildcard.example.local.key";
ssl_trusted_certificate   "/etc/nginx/tls/mkcert/rootCA.pem";
ssl_dhparam               "/etc/nginx/tls/mkcert/dhparam.pem";

include                   "extra/tls-ocsp-stapling.conf";
include                   "extra/tls-hsts.conf";
##################################################
```

# OpenSSL alternative

Alternatively you can generate self-signed keys on your own using `openssl` cli:

```
openssl req -x509 \
    -newkey rsa:2048 \
    -sha256 \
    -days 7300 \
    -nodes \
    -keyout k5.local.key \
    -out k5.local.crt \
    -subj "/CN=k5.local"   \
    -addext "subjectAltName=DNS:k5.local,DNS:*.k5.local,IP:127.0.0.1,IP:::1"
```

Bear in mind that server certificate generated this way WILL NOT be trusted by browsers
on your local machine.

# Miscellaneous, references
* [mkcert] :: tool for easy creation of trusted development certificates 

[mkcert]: https://github.com/FiloSottile/mkcert